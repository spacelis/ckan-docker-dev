src:
  image: ubuntu
  command: true
  volumes:
    - ../ckan:/usr/lib/ckan/default/src/ckan
    - ../ckan-service-provider:/usr/lib/ckan/default/src/ckan-service-provider
    - ../ckan-ckanext-cdrcmeta:/usr/lib/ckan/default/src/ckan-ckanext-cdrcmeta
    - ../ckan-ckanext-cdrc:/usr/lib/ckan/default/src/ckan-ckanext-cdrc
    - ../ckan-ckanext-viewhelpers:/usr/lib/ckan/default/src/ckan-ckanext-viewhelpers
    - ../ckan-ckanext-dashboard:/usr/lib/ckan/default/src/ckan-ckanext-dashboard

ckan:
  image: spacelis/ckan-docker-dev
  links:
    - db
    - solr
  ports:
    - 80:80
  volumes_from:
    - src
  # environment:
  #   CKAN_TEST_MODE: 1

solr:
  image: spacelis/ckan-docker-solr
  ports:
    - 8983:8983
  volumes_from:
    - src

db:
  image: spacelis/ckan-docker-postgresql
  ports:
    - 5432:5432
